%% Multi-Agent Tour Guide System - C4 Context Diagram
%% Render at: https://mermaid.live

graph TB
    subgraph "Multi-Agent Tour Guide System"
        direction TB
        
        subgraph "Presentation Layer"
            CLI[ğŸ–¥ï¸ CLI<br/>Typer]
            API[ğŸŒ REST API<br/>FastAPI]
        end
        
        subgraph "Orchestration Layer"
            ORC[ğŸ¯ Orchestrator<br/>ThreadPoolExecutor]
            SQ[ğŸ“¬ Smart Queue<br/>Tiered Timeouts]
        end
        
        subgraph "Agent Layer"
            VA[ğŸ¬ Video Agent]
            MA[ğŸµ Music Agent]
            TA[ğŸ“– Text Agent]
            JA[âš–ï¸ Judge Agent]
        end
        
        subgraph "Infrastructure Layer"
            CB[ğŸ›¡ï¸ Circuit Breaker]
            RT[ğŸ”„ Retry]
            OBS[ğŸ“Š Observability]
            PLG[ğŸ”Œ Plugins]
        end
        
        subgraph "Research Layer"
            EXP[ğŸ§ª Experiments]
            STAT[ğŸ“ˆ Statistics]
            VIZ[ğŸ“Š Visualization]
        end
    end
    
    %% External Systems
    USER[ğŸ‘¤ User]
    YT[ğŸ“º YouTube API]
    SP[ğŸ§ Spotify API]
    WK[ğŸ“š Wikipedia]
    LLM[ğŸ¤– LLM Provider<br/>Claude/GPT]
    PROM[ğŸ“Š Prometheus]
    
    %% Connections
    USER --> CLI
    USER --> API
    
    CLI --> ORC
    API --> ORC
    
    ORC --> VA
    ORC --> MA
    ORC --> TA
    
    VA --> SQ
    MA --> SQ
    TA --> SQ
    
    SQ --> JA
    
    VA -.-> CB
    MA -.-> CB
    TA -.-> CB
    
    CB --> YT
    CB --> SP
    CB --> WK
    JA --> LLM
    
    OBS --> PROM
    
    classDef external fill:#f9f,stroke:#333,stroke-width:2px
    classDef core fill:#bbf,stroke:#333,stroke-width:2px
    classDef research fill:#bfb,stroke:#333,stroke-width:2px
    
    class YT,SP,WK,LLM,PROM external
    class ORC,SQ,VA,MA,TA,JA core
    class EXP,STAT,VIZ research

